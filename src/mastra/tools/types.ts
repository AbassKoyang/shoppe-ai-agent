import z from "zod";

export const UserSchema = z.object({
    id: z.string().optional(),
      profile: z.object({
        name: z.string().min(1, "Name is required"),
        email: z.string().email("Invalid email format"),
        imageUrl: z.string().url().optional(),
        language: z.literal(['English', 'Français'])
      }),
      shopPrefrences: z.object({
          country: z.literal(['Nigeria', 'USA', 'Spain']),
          currency: z.literal(['$ USD', '€ EURO', '₦ NGN']),
          size: z.literal(['US', 'UK', 'EU']),
      }),
      shippingAddress: z.object({
        country: z.string(),
        city: z.string(),
        address: z.string(),
        postalCode: z.string(),
        phoneNumber: z.string(),
      }),
      bankDetails: z.object({
        recipientCode: z.string(),
        bankCode: z.string(),
        bankName: z.string(),
        accountNumber: z.string(),
        accountName: z.string(),
        currency: z.string(),
      }).optional(),
          fcmTokens: z.string().array().optional(),
      createdAt: z.iso.datetime(),
      updatedAt: z.iso.datetime(),
      lastSeenNotificationsAt: z.date().optional(),
    });

    export const ProductSchema = z
  .object({
    id: z.string().min(1, "Product ID is required").optional(),
    sellerId: z.string().min(1, "Seller ID is required").optional(),
    title: z.string().min(1, "Product title is required"),
    description: z.string().min(1, "Description is required"),
    price: z.string().min(1, 'Price is required'),
    discount: z.string().min(1, 'Discount is required (enter 0 if no discount)'),
    currency: z.union([z.literal("$ USD"), z.literal("€ EURO"), z.literal("₦ NGN")]),
    images: z.any().array().min(1, "At least one image is required"),
    category: z.literal(["Tops","Bottoms","Dresses","Outerwear","Shoes","Accessories","Bags","Underwear","Swimwear","Activewear","Other"]),
    subCategory: z.literal([
    "T-Shirts",
    "Polo Shirts",
    "Tank Tops",
    "Blouses",
    "Dress Shirts",
    "Henleys",
    "Sweatshirts",
    "Hoodies",
    "Crop Tops",
    "Tunics",

    "Jeans",
    "Chinos",
    "Dress Pants",
    "Joggers",
    "Leggings",
    "Shorts",
    "Cargo Pants",
    "Skirts",
    "Capris",
    "Overalls",

    "Casual Dresses",
    "Evening Gowns",
    "Cocktail Dresses",
    "Maxi Dresses",
    "Mini Dresses",
    "Bodycon Dresses",
    "Wrap Dresses",
    "Shirt Dresses",
    "Sundresses",
    "Work Dresses",

    "Jackets",
    "Blazers",
    "Coats",
    "Trench Coats",
    "Parkas",
    "Bomber Jackets",
    "Leather Jackets",
    "Denim Jackets",
    "Cardigans",
    "Vests",
    
    "Sneakers",
    "Boots",
    "Sandals",
    "Loafers",
    "Heels",
    "Flats",
    "Wedges",
    "Espadrilles",
    "Oxfords",
    "Slippers",
    
    "Backpacks",
    "Tote Bags",
    "Crossbody Bags",
    "Clutches",
    "Shoulder Bags",
    "Messenger Bags",
    "Satchels",
    "Duffle Bags",
    "Belt Bags",
    "Laptop Bags",

    "Hats & Caps",
    "Scarves",
    "Gloves",
    "Belts",
    "Ties & Bowties",
    "Watches",
    "Jewelry",
    "Sunglasses",
    "Wallets",
    "Hair Accessories",

    "Boxers",
    "Briefs",
    "Trunks",
    "Bras",
    "Panties",
    "Camisoles",
    "Thermal Underwear",
    "Shapewear",
    "Bralettes",
    "Lingerie",

    "Bikinis",
    "One-Piece Swimsuits",
    "Tankinis",
    "Swim Trunks",
    "Boardshorts",
    "Rash Guards",
    "Swim Dresses",
    "Monokinis",
    "Swim Skirts",
    "Cover-Ups",

    "Gym Shorts",
    "Sports Bras",
    "Leggings",
    "Tracksuits",
    "Compression Wear",
    "Athletic T-Shirts",
    "Tank Tops",
    "Joggers",
    "Hoodies",
    "Yoga Pants",

    "Custom Wear",
    "Uniforms",
    "Costumes",
    "Maternity Wear",
    "Workwear",
    "Ethnic Wear",
    "Festival Outfits",
    "Seasonal Clothing",
    "Vintage",
    "Miscellaneous"
]),    
    condition: z.literal(["new", "used"]),
    size: z.union([
      z.literal(["One Size", "XS", "S", "M", "L", "XL", "XXL"]), // alpha + one size
      z.string().regex(/^\d+$/, "Numeric size must be digits only"), // numeric like 28, 30, 42...
    ]),
    gender: z.literal(["Men", "Women", "Unisex"]),
    brand: z.string().optional(),
    color: z.string().optional(),
    material: z.string().optional(),
    sku: z.string().optional(),
    location: z.string().optional(),
    views: z.number().optional(),
  status: z.literal(['available', 'pending', 'sold']).optional(),
  });

    export const transactionSchema = z.object({
        id: z.string().optional(),
        productId: z.string(),
        sellerId: z.string(),
        buyerId: z.string(),
        amount: z.number(),
        platformFee: z.number(),
        sellerAmount: z.number(),
        status: z.literal(['pending','released','cancelled']),
        paystackReference: z.string(),
        paystackTransferId: z.string().optional(),
        createdAt: z.any(),
        releasedAt: z.any().optional(),
      });
    
    export  const OrderSchema = z.object({
        id: z.string().optional(),
        status: z.literal(['pending', 'delivered' , 'completed' , 'cancelled']),
        buyerInfo: UserSchema,
        sellerInfo: UserSchema,
        productDetails: ProductSchema,
        transactionDetails: transactionSchema,
        createdAt: z.any(),
    });


    export type ProductType = z.infer<typeof ProductSchema>;
    export type OrderType = z.infer<typeof OrderSchema>;
    export type TransactionType = z.infer<typeof transactionSchema>;